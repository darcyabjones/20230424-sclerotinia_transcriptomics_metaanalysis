#!/usr/bin/env bash

set -euo pipefail
# Sclerotinia genus
TAXIDS=(
  28983
  5179
  5180
  665079
  1095762
  28548
  665077
  1095956
  38451
  665078
  61204
  77105
  1432307
  87234
  90401
  107426
  107579
  262103
  279361
  352851
  504480
  589664
  2036904
  2036905
  2036906
  2075361
  2304652
  2619454
  112198
  126778
  126779
  318626
  318627
  318629
  318870
  364519
  480353
  520545
  660471
  660991
  660992
  728002
  999393
  1137103
  1496367
  1913369
  2831213
  33196
  40559
  332648
  999810
  1290391
  87229
  87230
  139639
  139640
  139641
  182092
  278936
  278937
  278938
  278940
  278943
  278948
  279185
  380458
  440584
  1005963
  1231648
  1280835
  1463997
  1463999
  1641147
  1737324
  1955583
  1964551
  2033810
  2074812
  2074813
  2478750
  2499830
  2645418
  226979
  301354
  301355
  440583
  445283
  445284
  445285
  445286
  445287
  445288
  445289
  445290
  445291
  445292
  498850
  498851
  498852
  498853
  548878
  746974
  746975
  914232
  986893
  986901
  1079738
  1086082
  1086083
  1086084
  1191190
  1231363
  1231364
  1231365
  1231366
  1231367
  1231368
  1231369
  1231370
  1231371
  1231373
  1231374
  1231375
  1408542
  1500793
  1520260
  1520261
  1520262
  1520263
  1562971
  1562972
  1572719
  1572720
  1572721
  1572722
  1604174
  1615967
  1707576
  1707577
  1707578
  1707579
  1752885
  1768259
  1776585
  1776586
  1816273
  1824739
  1835589
  1849799
  1913878
  1969484
  2484203
  2498555
  2795664
  2883621
  2795623
  2877444
  38442
  38443
  38444
  87227
  87228
  87232
  87233
  108355
  2714548
  38447
  38448
  38457
  38486
  38487
  61186
  61188
  61189
  61194
  61207
  61209
  61210
  61211
  61212
  61213
  61214
  61215
  254396
  255361
  282065
  302841
  335683
  859164
  2075160
  2624026
  301122
  888627
  888628
  1135878
  1813542
  1978775
  2763337
  38449
  1789069
  38460
  38461
  38465
  54674
  376716
  984308
  984309
  1436306
  1436307
  1436308
  1436310
  1436311
  1436326
  1792666
  2643838
  315209
  1439881
  1490148
  2011974
  2857123
  38484
  38468
  38485
  58902
  61218
  647257
  1973128
  2624590
  2107894
  2650706
  40558
  38488
  54673
  278939
  278941
  278942
  278944
  278945
  278946
  278947
  438415
  2074811
  2641190
  888580
  888581
  888582
  888583
  888584
  888585
  888586
  888587
  1085273
  1101320
  1256956
  1321859
  1405016
  1417967
  1521828
  1521847
  1521848
  1521849
  1521850
  1560273
  1560275
  1594177
  1594178
  1594179
  1594180
  1611033
  1678369
  1897509
  54675
  54676
  54677
  54678
  87231
  54681
  54682
  1855366
  54688
  54689
  1792672
  54690
  54691
  58904
  58905
  58906
  58907
  58908
  58909
  2647697
  2040958
  66099
  66100
  66101
  38492
  66102
  1490160
  2075413
  2622258
  2011722
  233967
  233968
  254394
  180977
  254115
  503105
  1094346
  2075158
  2075159
  2631117
  645435
  1094347
  296781
  1335929
  2630646
  866577
  1073180
  1073181
  1955120
  301361
  301362
  1460964
  2634397
  2282913
  316978
  63354
  401651
  543749
  1130880
  1629045
  1754208
  1807381
  1882528
  316980
  316982
  593129
  666631
  682745
  909235
  997653
  1034326
  1034327
  1048540
  1274797
  2722947
  378065
  378066
  2621264
  2040881
  2748091
  2748092
  378068
  378067
  520569
  520570
  1490161
  1506594
  1506595
  1506596
  2685438
  1490157
  1490172
  2012115
  2928554
  2782726
  602075
  451821
  1003146
  1003147
  2795665
  2795666
  1424662
  1424663
  1484601
  1484602
  2075380
  2979532
  2979533
  1506591
  1506592
  1752089
  1752090
  1792695
  1792694
  1929099
  1929100
  2620042
  2530087
  1971359
  54680
  1792696
  1971360
  2980879
  2980880
  1973134
  1973135
  2080981
  2080982
  2080983
  2081432
  2081438
  2081434
  2081440
  2081454
  2081461
  2081455
  2081463
  2638957
  2081462
  2081464
  2603219
  2799698
  2259785
  2259787
  2825849
  2825850
  2825851
  2825852
  2825853
  2940971
  2940972
  565141
  565142
  2844400
  3025633
  2975234
)


mkdir -p work/alphafold_structures
cd work/alphafold_structures

for TAXID in "${TAXIDS[@]}"
do
    echo "Downloading ${TAXID}"
    gsutil -m cp "gs://public-datasets-deepmind-alphafold-v4/proteomes/proteome-tax_id-${TAXID}-*_v4.tar" . || :
done

for f in ./proteome*.tar
do
    tar -xf $f
done

find . -name "*.tar" -delete
# Have to use this because too many files for rm
#find . -name "*.json.gz" -delete
